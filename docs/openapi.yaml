openapi: 3.0.3
info:
  title: ğŸˆ ë£¨í‹´ëƒ¥ API ëª…ì„¸ì„œ
  description: AI based routine Recommendation Service - ë£¨í‹´ëƒ¥ Serverì˜ API ëª…ì„¸ì„œì…ë‹ˆë‹¤.
  version: v1
servers:
  - url: http://localhost:8080
    description: Local Test Server
security:
  - bearer-key: []
tags:
  - name: Routine Group
    description: ë£¨í‹´ ê·¸ë£¹ API
  - name: Routine
    description: ë£¨í‹´ API
  - name: User
    description: ìœ ì € API
paths:
  /api/users/info/survey-answers:
    get:
      tags:
        - User
      summary: User ì„¤ë¬¸ ì •ë³´ ì¡°íšŒ
      description: ì˜¨ë³´ë”©ì—ì„œ ì…ë ¥ë°›ì€ ìœ ì €ì˜ ì„¤ë¬¸ ê²°ê³¼ ì¡°íšŒ
      operationId: findSurveyAnswers
      parameters:
        - name: user
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/User'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseSurveyResponse'
    put:
      tags:
        - User
      summary: User ì„¤ë¬¸ ì •ë³´ ìˆ˜ì •
      description: ìœ ì €ì˜ ì„¤ë¬¸ ì •ë³´ ìˆ˜ì •
      operationId: updateSurveyAnswers
      parameters:
        - name: user
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/User'
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/SurveyDto'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseSurveyResponse'
  /api/users/info/basics:
    get:
      tags:
        - User
      summary: User ê¸°ë³¸ ì •ë³´ ì¡°íšŒ
      description: ìœ ì €ì˜ ì´ë¦„, ë‚˜ì´, ì„±ë³„ ì¡°íšŒ
      operationId: findBasicUserInfo
      parameters:
        - name: user
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/User'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseUserBasicInfoDto'
    put:
      tags:
        - User
      summary: User ê¸°ë³¸ ì •ë³´ ìˆ˜ì •
      description: ìœ ì €ì˜ ê¸°ë³¸ ì •ë³´ ìˆ˜ì •
      operationId: updateUserInfo
      parameters:
        - name: user
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/User'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserBasicInfoDto'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseUserBasicInfoDto'
  /api/routines/{routine-id}:
    get:
      tags:
        - Routine
      summary: Routine ì¡°íšŒ (id)
      description: ë£¨í‹´ì˜ ê³ ìœ  ì‹ë³„ì(id)ë¡œ ë£¨í‹´ ìƒì„¸ ì •ë³´ ì¡°íšŒ
      operationId: find
      parameters:
        - name: routine-id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseRoutineDetailResponse'
    put:
      tags:
        - Routine
      summary: Routine ìˆ˜ì •
      description: ë£¨í‹´ì˜ ì„¸ë¶€ ì •ë³´ ìˆ˜ì •
      operationId: update
      parameters:
        - name: routine-id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoutineUpdateRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseRoutineResponse'
    delete:
      tags:
        - Routine
      summary: Routine ì‚­ì œ
      description: ë£¨í‹´ ì‚­ì œ
      operationId: delete
      parameters:
        - name: routine-id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseVoid'
  /api/routines/groups/{routine-group-id}:
    put:
      tags:
        - Routine Group
      summary: Routine Group ìˆ˜ì •
      description: ë£¨í‹´ ê·¸ë£¹ì˜ ì´ë¦„ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
      operationId: update_1
      parameters:
        - name: user
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/User'
        - name: routine-group-id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoutineGroupRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseRoutineGroupResponse'
    delete:
      tags:
        - Routine Group
      summary: Routine Group ì‚­ì œ
      description: ë£¨í‹´ ê·¸ë£¹ì„ ì‚­ì œí•©ë‹ˆë‹¤.
      operationId: delete_1
      parameters:
        - name: user
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/User'
        - name: routine-group-id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseVoid'
  /api/users/onboarding:
    post:
      tags:
        - User
      summary: User ì˜¨ë³´ë”© ì •ë³´ ì €ì¥
      description: ì˜¨ë³´ë”© í™”ë©´ì—ì„œ ì…ë ¥ë°›ì€ ìœ ì €ì˜ ê¸°ë³¸ ì •ë³´ ë° ì„¤ë¬¸ ê²°ê³¼ ì €ì¥
      operationId: saveOnboarding
      parameters:
        - name: user
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/User'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseUserResponse'
  /api/routines:
    get:
      tags:
        - Routine
      summary: Routine ëª©ë¡ ì¡°íšŒ (ë‚ ì§œ)
      description: íŠ¹ì • ë‚ ì§œì— ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ë£¨í‹´ ëª©ë¡ ì¡°íšŒ
      operationId: findAllByDate
      parameters:
        - name: user
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/User'
        - name: date
          in: query
          required: true
          schema:
            type: string
            format: date
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseListRoutineResponse'
    post:
      tags:
        - Routine
      summary: Routine ìƒì„±
      description: ìƒˆë¡œìš´ ë£¨í‹´ì„ ìƒì„±
      operationId: create
      parameters:
        - name: user
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/User'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoutineRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseRoutineResponse'
  /api/routines/groups:
    get:
      tags:
        - Routine Group
      summary: Routine Group ëª©ë¡ ì¡°íšŒ
      description: ë¡œê·¸ì¸í•œ ìœ ì €ì˜ ë£¨í‹´ ê·¸ë£¹ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: findAll
      parameters:
        - name: user
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/User'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseListRoutineGroupResponse'
    post:
      tags:
        - Routine Group
      summary: Routine Group ìƒì„±
      description: ë£¨í‹´ ê·¸ë£¹ì„ ìƒì„±í•©ë‹ˆë‹¤.
      operationId: create_1
      parameters:
        - name: user
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/User'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoutineGroupRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseRoutineGroupResponse'
  /api/users/oauth2/login/success:
    get:
      tags:
        - User
      summary: êµ¬ê¸€ ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì‘ë‹µ
      description: ìœ ì €ì˜ ì´ë¦„, ì˜¨ë³´ë”© ì™„ë£Œ ì—¬ë¶€, jwt í† í° ë°˜í™˜
      operationId: oauthLoginSuccess
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserLoginSuccessResponse'
  /api/routines/filter:
    get:
      tags:
        - Routine
      summary: Routine ëª©ë¡ ì¡°íšŒ (í•„í„°)
      description: ì „ì²´, ê·¸ë£¹ë³„, ì¢…ë£Œë˜ì§€ ì•Šì€ ë£¨í‹´ ì¡°íšŒ + í˜ì´ì§•
      operationId: findAllWithFilter
      parameters:
        - name: user
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/User'
        - name: groupId
          in: query
          required: false
          schema:
            type: integer
            format: int64
        - name: activeOnly
          in: query
          required: false
          schema:
            type: boolean
            default: false
        - name: page
          in: query
          description: Zero-based page index (0..N)
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: size
          in: query
          description: The size of the page to be returned
          required: false
          schema:
            type: integer
            default: 10
            minimum: 1
        - name: sort
          in: query
          description: 'Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.'
          required: false
          schema:
            type: array
            default:
              - createdAt,DESC
            items:
              type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponsePageRoutineResponse'
components:
  schemas:
    User:
      type: object
      properties:
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        id:
          type: integer
          format: int64
        email:
          type: string
        name:
          type: string
        onBoardingFinished:
          type: boolean
        dateOfBirth:
          type: string
          format: date
        gender:
          type: string
        userSurveys:
          type: array
          items:
            $ref: '#/components/schemas/UserSurvey'
    UserSurvey:
      type: object
      properties:
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        id:
          type: integer
          format: int64
        question:
          type: string
        answer:
          type: string
        user:
          $ref: '#/components/schemas/User'
    SurveyDto:
      type: object
      properties:
        question:
          type: string
        answer:
          type: string
    ApiResponseSurveyResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/SurveyResponse'
    SurveyResponse:
      type: object
      properties:
        totalCount:
          type: integer
          format: int32
        savedSurveys:
          type: array
          items:
            $ref: '#/components/schemas/SurveyDto'
    UserBasicInfoDto:
      type: object
      properties:
        name:
          type: string
        dateOfBirth:
          type: string
          format: date
        gender:
          type: string
    ApiResponseUserBasicInfoDto:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/UserBasicInfoDto'
    RoutineUpdateRequest:
      type: object
      properties:
        name:
          type: string
        repeatDays:
          type: array
          items:
            type: string
            enum:
              - MONDAY
              - TUESDAY
              - WEDNESDAY
              - THURSDAY
              - FRIDAY
              - SATURDAY
              - SUNDAY
          uniqueItems: true
        timesPerDay:
          type: integer
          format: int32
        preferredTime:
          type: string
        endDate:
          type: string
          format: date
        color:
          type: string
        groupId:
          type: integer
          format: int64
    ApiResponseRoutineResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/RoutineResponse'
    RoutineResponse:
      type: object
      properties:
        routineId:
          type: integer
          format: int64
        groupId:
          type: integer
          format: int64
        name:
          type: string
    RoutineGroupRequest:
      type: object
      properties:
        name:
          type: string
    ApiResponseRoutineGroupResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/RoutineGroupResponse'
    RoutineGroupResponse:
      type: object
      properties:
        groupId:
          type: integer
          format: int64
        name:
          type: string
    UserRequest:
      type: object
      properties:
        name:
          type: string
        dateOfBirth:
          type: string
          format: date
        gender:
          type: string
        surveys:
          type: array
          items:
            $ref: '#/components/schemas/SurveyDto'
    ApiResponseUserResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/UserResponse'
    UserResponse:
      type: object
      properties:
        userId:
          type: integer
          format: int64
        email:
          type: string
        dateOfBirth:
          type: string
          format: date
        gender:
          type: string
        surveyResponse:
          $ref: '#/components/schemas/SurveyResponse'
    RoutineRequest:
      type: object
      properties:
        name:
          type: string
        repeatDays:
          type: array
          items:
            type: string
            enum:
              - MONDAY
              - TUESDAY
              - WEDNESDAY
              - THURSDAY
              - FRIDAY
              - SATURDAY
              - SUNDAY
          uniqueItems: true
        timesPerDay:
          type: integer
          format: int32
        preferredTime:
          type: string
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        color:
          type: string
        groupId:
          type: integer
          format: int64
    UserLoginSuccessResponse:
      type: object
      description: êµ¬ê¸€ ë¡œê·¸ì¸ ì„±ê³µ í›„ ì‘ë‹µ
      properties:
        onboardingFinished:
          type: boolean
        userName:
          type: string
        token:
          type: string
    ApiResponseListRoutineResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          type: array
          items:
            $ref: '#/components/schemas/RoutineResponse'
    ApiResponseRoutineDetailResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/RoutineDetailResponse'
    RoutineDetailResponse:
      type: object
      properties:
        name:
          type: string
        repeatDays:
          type: array
          items:
            type: string
            enum:
              - MONDAY
              - TUESDAY
              - WEDNESDAY
              - THURSDAY
              - FRIDAY
              - SATURDAY
              - SUNDAY
          uniqueItems: true
        timesPerDay:
          type: integer
          format: int32
        preferredTime:
          type: string
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        color:
          type: string
        groupId:
          type: integer
          format: int64
    ApiResponseListRoutineGroupResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          type: array
          items:
            $ref: '#/components/schemas/RoutineGroupResponse'
    ApiResponsePageRoutineResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/PageRoutineResponse'
    PageRoutineResponse:
      type: object
      properties:
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
          format: int32
        size:
          type: integer
          format: int32
        content:
          type: array
          items:
            $ref: '#/components/schemas/RoutineResponse'
        number:
          type: integer
          format: int32
        sort:
          $ref: '#/components/schemas/SortObject'
        first:
          type: boolean
        last:
          type: boolean
        numberOfElements:
          type: integer
          format: int32
        pageable:
          $ref: '#/components/schemas/PageableObject'
        empty:
          type: boolean
    PageableObject:
      type: object
      properties:
        offset:
          type: integer
          format: int64
        sort:
          $ref: '#/components/schemas/SortObject'
        paged:
          type: boolean
        pageSize:
          type: integer
          format: int32
        pageNumber:
          type: integer
          format: int32
        unpaged:
          type: boolean
    SortObject:
      type: object
      properties:
        empty:
          type: boolean
        sorted:
          type: boolean
        unsorted:
          type: boolean
    ApiResponseVoid:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          type: object
  securitySchemes:
    bearer-key:
      type: http
      description: JWT í† í° í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!
      scheme: bearer
      bearerFormat: JWT
