openapi: 3.0.3
info:
  title: ğŸˆ ë£¨í‹´ëƒ¥ API ëª…ì„¸ì„œ
  description: AI based routine Recommendation Service - ë£¨í‹´ëƒ¥ Serverì˜ API ëª…ì„¸ì„œì…ë‹ˆë‹¤.
  version: v1
servers:
  - url: http://localhost:8080
    description: Local Test Server
security:
  - bearer-key: []
tags:
  - name: Routine Group
    description: ë£¨í‹´ ê·¸ë£¹ API
  - name: Routine
    description: ë£¨í‹´ API
  - name: User
    description: ìœ ì € API
paths:
  /api/users/info/survey-answers:
    get:
      tags:
        - User
      summary: User ì„¤ë¬¸ ì •ë³´ ì¡°íšŒ
      description: ì˜¨ë³´ë”©ì—ì„œ ì…ë ¥ë°›ì€ ìœ ì €ì˜ ì„¤ë¬¸ ê²°ê³¼ ì¡°íšŒ
      operationId: findSurveyAnswers
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseSurveyResponse'
    put:
      tags:
        - User
      summary: User ì„¤ë¬¸ ì •ë³´ ìˆ˜ì •
      description: ìœ ì €ì˜ ì„¤ë¬¸ ì •ë³´ ìˆ˜ì •
      operationId: updateSurveyAnswers
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/SurveyDto'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseSurveyResponse'
  /api/users/info/basics:
    get:
      tags:
        - User
      summary: User ê¸°ë³¸ ì •ë³´ ì¡°íšŒ
      description: ìœ ì €ì˜ ì´ë¦„, ë‚˜ì´, ì„±ë³„ ì¡°íšŒ
      operationId: findBasicUserInfo
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseUserBasicInfoDto'
    put:
      tags:
        - User
      summary: User ê¸°ë³¸ ì •ë³´ ìˆ˜ì •
      description: ìœ ì €ì˜ ê¸°ë³¸ ì •ë³´ ìˆ˜ì •
      operationId: updateUserInfo
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserBasicInfoDto'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseUserBasicInfoDto'
  /api/routines/{routine-id}:
    put:
      tags:
        - Routine
      summary: Routine ìˆ˜ì •
      description: ê¸°ì¡´ì— ì¡´ì¬í•˜ë˜ ë£¨í‹´ì„ ìˆ˜ì •
      operationId: updateRoutine
      parameters:
        - name: routine-id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoutineUpdateRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseRoutineResponse'
  /api/users/onboarding:
    post:
      tags:
        - User
      summary: User ì˜¨ë³´ë”© ì •ë³´ ì €ì¥
      description: ì˜¨ë³´ë”© í™”ë©´ì—ì„œ ì…ë ¥ë°›ì€ ìœ ì €ì˜ ê¸°ë³¸ ì •ë³´ ë° ì„¤ë¬¸ ê²°ê³¼ ì €ì¥
      operationId: saveOnboarding
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseUserResponse'
  /api/routines:
    post:
      tags:
        - Routine
      summary: Routine ìƒì„±
      description: ìƒˆë¡œìš´ ë£¨í‹´ì„ ìƒì„±
      operationId: createRoutine
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoutineRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseRoutineResponse'
  /api/routines/groups:
    get:
      tags:
        - Routine Group
      summary: Routine ê·¸ë£¹ ëª©ë¡ ì¡°íšŒ
      description: ë¡œê·¸ì¸í•œ ìœ ì €ì˜ ë£¨í‹´ ê·¸ë£¹ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      operationId: findAllRoutineGroups
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseListRoutineGroupResponse'
    post:
      tags:
        - Routine Group
      summary: Routine ê·¸ë£¹ ìƒì„±
      description: ë£¨í‹´ ê·¸ë£¹ì„ ìƒì„±í•©ë‹ˆë‹¤.
      operationId: createRoutineGroup
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoutineGroupRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseRoutineGroupResponse'
  /api/users/oauth2/login/success:
    get:
      tags:
        - User
      operationId: oauthLoginSuccess
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserLoginSuccessResponse'
  /api/routines/filter:
    get:
      tags:
        - Routine
      summary: Routine ì¡°íšŒ (í•„í„°)
      description: ì „ì²´, ê·¸ë£¹ë³„, ì¢…ë£Œë˜ì§€ ì•Šì€ ë£¨í‹´ ì¡°íšŒ + í˜ì´ì§•
      operationId: getFilteredRoutines
      parameters:
        - name: groupId
          in: query
          required: false
          schema:
            type: integer
            format: int64
        - name: activeOnly
          in: query
          required: false
          schema:
            type: boolean
            default: false
        - name: page
          in: query
          description: Zero-based page index (0..N)
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
        - name: size
          in: query
          description: The size of the page to be returned
          required: false
          schema:
            type: integer
            default: 10
            minimum: 1
        - name: sort
          in: query
          description: 'Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.'
          required: false
          schema:
            type: array
            default:
              - createdAt,DESC
            items:
              type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponsePageRoutineResponse'
components:
  schemas:
    SurveyDto:
      type: object
      properties:
        question:
          type: string
        answer:
          type: string
    ApiResponseSurveyResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/SurveyResponse'
    SurveyResponse:
      type: object
      properties:
        totalCount:
          type: integer
          format: int32
        savedSurveys:
          type: array
          items:
            $ref: '#/components/schemas/SurveyDto'
    UserBasicInfoDto:
      type: object
      properties:
        name:
          type: string
        dateOfBirth:
          type: string
          format: date
        gender:
          type: string
    ApiResponseUserBasicInfoDto:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/UserBasicInfoDto'
    RoutineUpdateRequest:
      type: object
      properties:
        name:
          type: string
        repeatDays:
          type: array
          items:
            type: string
            enum:
              - MONDAY
              - TUESDAY
              - WEDNESDAY
              - THURSDAY
              - FRIDAY
              - SATURDAY
              - SUNDAY
          uniqueItems: true
        timesPerDay:
          type: integer
          format: int32
        preferredTime:
          type: string
        endDate:
          type: string
          format: date
        color:
          type: string
        groupId:
          type: integer
          format: int64
    ApiResponseRoutineResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/RoutineResponse'
    RoutineResponse:
      type: object
      properties:
        routineId:
          type: integer
          format: int64
        groupId:
          type: integer
          format: int64
        name:
          type: string
    UserRequest:
      type: object
      properties:
        name:
          type: string
        dateOfBirth:
          type: string
          format: date
        gender:
          type: string
        surveys:
          type: array
          items:
            $ref: '#/components/schemas/SurveyDto'
    ApiResponseUserResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/UserResponse'
    UserResponse:
      type: object
      properties:
        userId:
          type: integer
          format: int64
        email:
          type: string
        dateOfBirth:
          type: string
          format: date
        gender:
          type: string
        surveyResponse:
          $ref: '#/components/schemas/SurveyResponse'
    RoutineRequest:
      type: object
      properties:
        name:
          type: string
        repeatDays:
          type: array
          items:
            type: string
            enum:
              - MONDAY
              - TUESDAY
              - WEDNESDAY
              - THURSDAY
              - FRIDAY
              - SATURDAY
              - SUNDAY
          uniqueItems: true
        timesPerDay:
          type: integer
          format: int32
        preferredTime:
          type: string
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        color:
          type: string
        groupId:
          type: integer
          format: int64
    RoutineGroupRequest:
      type: object
      properties:
        name:
          type: string
    ApiResponseRoutineGroupResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/RoutineGroupResponse'
    RoutineGroupResponse:
      type: object
      properties:
        groupId:
          type: integer
          format: int64
        name:
          type: string
    UserLoginSuccessResponse:
      type: object
      description: êµ¬ê¸€ ë¡œê·¸ì¸ ì„±ê³µ í›„ ì‘ë‹µ
      properties:
        onboardingFinished:
          type: boolean
        userName:
          type: string
        token:
          type: string
    ApiResponseListRoutineGroupResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          type: array
          items:
            $ref: '#/components/schemas/RoutineGroupResponse'
    ApiResponsePageRoutineResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        code:
          type: string
        data:
          $ref: '#/components/schemas/PageRoutineResponse'
    PageRoutineResponse:
      type: object
      properties:
        totalPages:
          type: integer
          format: int32
        totalElements:
          type: integer
          format: int64
        size:
          type: integer
          format: int32
        content:
          type: array
          items:
            $ref: '#/components/schemas/RoutineResponse'
        number:
          type: integer
          format: int32
        sort:
          $ref: '#/components/schemas/SortObject'
        first:
          type: boolean
        last:
          type: boolean
        numberOfElements:
          type: integer
          format: int32
        pageable:
          $ref: '#/components/schemas/PageableObject'
        empty:
          type: boolean
    PageableObject:
      type: object
      properties:
        offset:
          type: integer
          format: int64
        sort:
          $ref: '#/components/schemas/SortObject'
        paged:
          type: boolean
        pageNumber:
          type: integer
          format: int32
        pageSize:
          type: integer
          format: int32
        unpaged:
          type: boolean
    SortObject:
      type: object
      properties:
        empty:
          type: boolean
        sorted:
          type: boolean
        unsorted:
          type: boolean
  securitySchemes:
    bearer-key:
      type: http
      description: JWT í† í° í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!
      scheme: bearer
      bearerFormat: JWT
